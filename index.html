<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dear my love</title>
    <link rel="icon" type="image/png" href="favi.png" />
    <style>
      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100dvh; /* viewport ƒë·ªông cho iOS/Safari */
        overflow: hidden; /* kh√≥a k√©o ngang + d·ªçc */
        background: hsl(70, 31%, 85%);
      }

      body {
        user-select: none;
        text-align: center;
        font-family: Arial, sans-serif;
      }

      /* Ti√™u ƒë·ªÅ c·ªë ƒë·ªãnh tr√™n c√πng, kh√¥ng chi·∫øm chi·ªÅu cao layout */
      .typewriter {
        position: fixed;
        top: 82px;
        left: 50%;
        transform: translateX(-50%);
        margin: 0;
        z-index: 20;
        max-width: 92vw;
      }

      .typewriter h1 {
        color: #ee6f6f;
        font-family: monospace;
        overflow: hidden;
        border-right: 0.15em solid orange;
        white-space: nowrap;
        font-size: 1.2rem; /* nh·ªè v·ª´a ƒë·ªÉ kh√¥ng tr√†n */
        letter-spacing: 0.15em;
        margin: 0;
        animation: typing 3.5s steps(40, end),
          blink-caret 0.75s step-end infinite;
      }

      @keyframes typing {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }
      @keyframes blink-caret {
        from,
        to {
          border-color: transparent;
        }
        50% {
          border-color: orange;
        }
      }

      /* Ti√™u ƒë·ªÅ c·ªë ƒë·ªãnh tr√™n c√πng, kh√¥ng chi·∫øm chi·ªÅu cao layout */
      .typewriter-1 {
        position: fixed;
        top: 112px;
        left: 50%;
        transform: translateX(-50%);
        margin: 0;
        z-index: 20;
        max-width: 92vw;
      }

      .typewriter-1 h1 {
        color: #ee6f6f;
        font-family: monospace;
        overflow: hidden;
        border-right: 0.15em solid orange;
        white-space: nowrap;
        font-size: 1.2rem; /* nh·ªè v·ª´a ƒë·ªÉ kh√¥ng tr√†n */
        letter-spacing: 0.15em;
        margin: 0;
        animation: typing 3.5s steps(40, end),
          blink-caret 0.75s step-end infinite;
      }

      @keyframes typing {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }
      @keyframes blink-caret {
        from,
        to {
          border-color: transparent;
        }
        50% {
          border-color: orange;
        }
      }

      /* Container c·ªë ƒë·ªãnh gi·ªØa m√†n h√¨nh ƒë·ªÉ kh√¥ng t·∫°o scroll */
      .container {
        position: fixed;
        top: 60%;
        left: 50%;
        width: 400px;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
        transform: translate(-50%, -50%) rotate(-3deg) scale(0.69);
        transform-origin: center center;
        z-index: 10;
      }

      /* Gi·ªØ nguy√™n ph·∫ßn phong b√¨ c·ªßa b·∫°n */
      .behind-envelope {
        position: relative;
        background-color: rgb(252, 221, 174);
        height: 240px;
        width: 400px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .top-envelope {
        position: absolute;
        width: 0;
        height: 0;
        border-left: 200px solid transparent;
        border-right: 200px solid transparent;
        border-bottom: 120px solid rgb(252, 221, 174);
        top: -60px;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
      }

      .front-envelope {
        position: absolute;
        width: 0;
        height: 0;
        border-top: 120px solid transparent;
        border-left: 200px solid #cab09d;
        border-right: 200px solid #cab09d;
        border-bottom: 120px solid #cab09d;
        bottom: -120px;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
      }

      .bodder {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        pointer-events: none;
      }

      .bodder div {
        position: absolute;
        background-color: rgb(128, 60, 4);
        border-radius: 10px;
      }

      .bodder-1,
      .bodder-2 {
        width: 460px;
        height: 5px;
      }
      .bodder-1 {
        transform: rotate(30.9deg);
      }
      .bodder-2 {
        transform: rotate(-30.9deg);
      }
      .bodder-3 {
        width: 400px;
        height: 5px;
        top: 0%;
      }
      .bodder-4 {
        width: 400px;
        height: 5px;
        bottom: 10%;
      }
      .bodder-5 {
        width: 5px;
        height: 240px;
        left: 99%;
      }
      .bodder-6 {
        width: 5px;
        height: 240px;
        left: 0%;
      }
      .bodder-7 {
        width: 235px;
        height: 5px;
        top: -25%;
        left: 45.6%;
        transform: rotate(30.9deg);
      }
      .bodder-8 {
        width: 234px;
        height: 5px;
        top: -25%;
        left: -4%;
        transform: rotate(-30.9deg);
      }

      .letter {
        position: absolute;
        width: 300px;
        background: #f3e7e4;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        border: 5px solid rgb(128, 60, 4);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        color: #333;
        cursor: grab;
        transition: top 0.3s ease;
        left: 50%;
        top: 35%;
        transform: translate(-50%, -50%);
        padding: 20px;
        line-height: 1.6;
      }

      .letter p {
        margin: 5px 0;
      }
      .letter .highlight,
      .letter .emoji {
        font-weight: bold;
        color: #fc4c3f;
      }
      .letter:hover {
        top: calc(5% - 90px);
      }

      /* Balloons: thu nh·ªè + c·ªë ƒë·ªãnh d∆∞·ªõi ƒë·ªÉ kh√¥ng t·∫°o scroll */
      .bay {
        position: fixed;
        bottom: 6%;
        left: 50%;
        transform: translateX(-50%) scale(0.8); /* ‚Üì thu nh·ªè c·∫£ c·ª•m balloon */
        transform-origin: bottom center;
        display: flex;
        justify-content: center;
        align-items: flex-end;
        z-index: 5;
        pointer-events: none; /* kh√¥ng c·∫£n click ph√°t nh·∫°c */
      }

      .balloon {
        display: inline-block;
        width: 80px; /* b·∫°n ƒë√£ gi·∫£m ‚Äî gi·ªØ nguy√™n */
        height: 95px;
        background: hsl(215, 50%, 65%);
        border-radius: 80%;
        position: relative;
        box-shadow: inset -10px -10px 0 rgba(0, 0, 0, 0.07);
        margin: 10px 16px; /* gi·∫£m margin ƒë·ªÉ g·ªçn h∆°n */
        transition: transform 0.5s ease;
        animation: balloons 4s ease-in-out infinite;
        transform-origin: bottom center;
      }

      @keyframes balloons {
        0%,
        100% {
          transform: translateY(0) rotate(-4deg);
        }
        50% {
          transform: translateY(-25px) rotate(4deg);
        }
      }

      .balloon:before {
        content: "‚ñ≤";
        font-size: 16px; /* nh·ªè l·∫°i cho c√¢n ƒë·ªëi */
        color: hsl(215, 30%, 50%);
        display: block;
        text-align: center;
        width: 100%;
        position: absolute;
        bottom: -12px;
        z-index: -100;
      }

      .balloon:after {
        display: inline-block;
        top: 93px;
        position: absolute;
        height: 90px;
        width: 1px;
        margin: 0 auto;
        content: "";
        background: rgba(0, 0, 0, 0.2);
      }

      .balloon:nth-child(2) {
        background: hsl(245, 40%, 65%);
        animation-duration: 3.5s;
      }
      .balloon:nth-child(2):before {
        color: hsl(245, 40%, 65%);
      }

      .balloon:nth-child(3) {
        background: hsl(139, 50%, 60%);
        animation-duration: 3s;
      }
      .balloon:nth-child(3):before {
        color: hsl(139, 30%, 50%);
      }

      .balloon:nth-child(4) {
        background: hsl(59, 50%, 58%);
        animation-duration: 4.5s;
      }
      .balloon:nth-child(4):before {
        color: hsl(59, 30%, 52%);
      }

      .balloon:nth-child(5) {
        background: hsl(23, 55%, 57%);
        animation-duration: 5s;
      }
      .balloon:nth-child(5):before {
        color: hsl(23, 44%, 46%);
      }

      .balloon:nth-child(6) {
        background: hsl(0, 55%, 57%);
        animation-duration: 5s;
      }
      .balloon:nth-child(6):before {
        color: hsl(4, 44%, 46%);
      }

      /* Bong b√≥ng ·∫£nh n·ªïi (b·∫°n ƒëang t·∫Øt) ‚Äî gi·ªØ nguy√™n */
      .floating-bubble {
        position: absolute;
        width: 180px;
        height: 180px;
        border-radius: 50%;
        background: white;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        animation: floatUp 5s linear infinite;
      }
      .floating-bubble img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
      }
      @keyframes floatUp {
        0% {
          transform: translateY(100vh) scale(0.5);
          opacity: 0;
        }
        50% {
          opacity: 1;
        }
        100% {
          transform: translateY(-10vh) scale(1);
          opacity: 0;
        }
      }
      .music-widget {
        position: fixed;
        top: 10px;
        left: 10px;
        border-radius: 25px;
        padding: 5px 10px;
        font-family: sans-serif;
        z-index: 1;
      }
      .music-btn {
        border: none;
        background: #f44336;
        color: white;
        padding: 8px 14px;
        border-radius: 20px;
        font-size: 14px;
        cursor: pointer;
        transition: 0.3s;
      }
      .music-btn:hover {
        background: #f44336;
      }

      /* Canvas ph√°o hoa */
      canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 1000; /* Canvas n·∫±m d∆∞·ªõi n√∫t nh∆∞ng tr√™n n·ªÅn */
      }
    </style>
  </head>
  <body>
    <div class="typewriter">
      <h1>Th∆∞ ch√∫c m·ª´ng</h1>
    </div>
    <div class="typewriter-1">
      <h1>b·∫°n iu nh·∫≠p h·ªçc</h1>
    </div>

    <div class="container">
      <div class="behind-envelope">
        <div class="top-envelope"></div>
        <div class="bodder">
          <div class="bodder-3"></div>
          <div class="bodder-7"></div>
          <div class="bodder-8"></div>
        </div>
        <div class="letter">
          <p class="emoji">Ch√∫c m·ª´ng b·∫°n iuuu üíó</p>
          <p>
            H√¥m nay l√† ng√†y ƒë·∫∑c bi·ªát (1.9.25), ng√†y m√† b·∫°n b∆∞·ªõc v√†o m·ªôt ch∆∞∆°ng
            m·ªõi c·ªßa cu·ªôc ƒë·ªùi. Ch√∫c m·ª´ng b·∫°n ƒë√£ th·ª±c hi·ªán ƒë∆∞·ª£c ∆∞·ªõc m∆° c·ªßa m√¨nh.
            Ch√∫c b·∫°n c√≥ m·ªôt nƒÉm h·ªçc th·∫≠t th√†nh c√¥ng. Y√™u b·∫°n nhi·ªÅu üíñ
          </p>
        </div>
        <div class="front-envelope"></div>
      </div>
      <div class="bodder">
        <div class="bodder-1"></div>
        <div class="bodder-2"></div>
        <div class="bodder-4"></div>
        <div class="bodder-5"></div>
        <div class="bodder-6"></div>
      </div>
      <img
        style="height: 60px; position: absolute"
        src="pngegg.png"
        alt="M√¥ t·∫£ h√¨nh ·∫£nh"
      />
    </div>

    <!-- music -->
    <div class="music-widget">
      <button id="musicToggle" class="music-btn">‚è∏</button>
    </div>
    <audio id="myAudio" loop>
      <source src="mucsicblom.mp3" type="audio/mp3" />
    </audio>

    <div class="bay">
      <div class="balloon"></div>
      <div class="balloon"></div>
      <div class="balloon"></div>
      <div class="balloon"></div>
    </div>

    <canvas id="fireworks"></canvas>

    <script>
      document.addEventListener("click", function () {
        var audio = document.getElementById("myAudio");
        if (audio.paused) {
          audio
            .play()
            .catch((error) => console.log("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", error));
        }
      });

      const musicBtn = document.getElementById("musicToggle");
      const audio = document.getElementById("myAudio");

      // Khi click n√∫t th√¨ ƒë·ªïi tr·∫°ng th√°i nh·∫°c
      musicBtn.addEventListener("click", function (e) {
        e.stopPropagation(); // Tr√°nh b·ªã click document
        if (audio.paused) {
          audio.play();
          musicBtn.textContent = "üéµ ";
          musicBtn.style.background = "#4CAF50";
        } else {
          audio.pause();
          musicBtn.textContent = "‚è∏";
          musicBtn.style.background = "#f44336";
        }
      });

      //fireworks

      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      class Firework {
        constructor(x, y, color) {
          this.x = x;
          this.y = y;
          this.color = color;
          this.radius = Math.random() * 2 + 2; // h·∫°t to h∆°n
          this.alpha = 1;
          this.speedY = -Math.random() * 4 - 2; // bay cao h∆°n
          this.speedX = Math.random() * 3.5 - 2.5;
          this.gravity = 0.03;
          this.fade = 0.003 + Math.random() * 0.01; // ch·∫≠m t√†n
        }
        update() {
          this.x += this.speedX;
          this.y += this.speedY;
          this.speedY += this.gravity;
          this.alpha -= this.fade;
        }
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(${this.color},${this.alpha})`;
          ctx.fill();
        }
      }

      let fireworks = [];

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        fireworks.forEach((f, i) => {
          f.update();
          f.draw();
          if (f.alpha <= 0) fireworks.splice(i, 1);
        });
        requestAnimationFrame(animate);
      }

      function launchFireworks() {
        const colors = [
          "150,0,0", // ƒë·ªè r∆∞·ª£u
          "0,100,0", // xanh l√° ƒë·∫≠m
          "0,0,120", // xanh bi·ªÉn ƒë·∫≠m
          "180,150,0", // v√†ng t·ªëi
          "200,80,0", // cam ƒë·ªè
          "70,0,100", // t√≠m than
        ];

        // b·∫Øn nhi·ªÅu ph√°o c√πng l√∫c (3 ƒëi·ªÉm b·∫Øn)
        for (let j = 0; j < 1; j++) {
          const x = Math.random() * canvas.width;
          const y = canvas.height;
          const color = colors[Math.floor(Math.random() * colors.length)];
          for (let i = 0; i < 80; i++) {
            fireworks.push(new Firework(x, y, color));
          }
        }
      }

      setInterval(launchFireworks, 1200);
      animate();

      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
    </script>
    <!--
    <script>
      function createBubble() {
        const bubble = document.createElement("div");
        bubble.classList.add("floating-bubble");
        const img = document.createElement("img");
        img.src = "fav.png";
        bubble.appendChild(img);
        bubble.style.left = Math.random() * window.innerWidth + "px";
        bubble.style.animationDuration = Math.random() * 3 + 3 + "s";
        document.body.appendChild(bubble);
        setTimeout(() => bubble.remove(), 5000);
      }
      setInterval(createBubble, 800);
    </script>
    -->
  </body>
</html>
